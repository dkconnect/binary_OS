<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary OS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #0d1117;
        }

        .os-container {
            position: relative;
            width: 100%;
            max-width: 380px;
            height: 80vh;
            border-radius: 3rem;
            box-shadow: 0 0 100px rgba(0,0,0,0.5), inset 0 0 10px rgba(255,255,255,0.1);
            background-image: linear-gradient(to bottom right, #1f2937, #111827);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #ffffff;
            transition: transform 0.2s ease-in-out;
            cursor: pointer;
        }
        .app-icon:hover {
            transform: scale(1.05);
        }
        .app-icon > div {
            background-image: linear-gradient(to top left, #1f2937, #2d3748);
            padding: 0.75rem;
            border-radius: 1.5rem; 
            box-shadow: inset 0 2px 4px rgba(255,255,255,0.1), 0 4px 6px rgba(0,0,0,0.3);
            margin-bottom: 0.5rem;
        }
        .app-icon svg {
            color: #ffffff; 
        }
        
        .calc-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            font-size: 1.5rem;
            padding: 1rem;
            border-radius: 9999px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.4);
            transition-property: background-color, transform, box-shadow;
            transition-duration: 0.2s;
            cursor: pointer;
        }
        .calc-btn:hover {
            transform: scale(1.02);
        }

        .calc-btn.gray { background-color: #555555; }
        .calc-btn.dark-gray { background-color: #333333; }
        .calc-btn.orange { background-color: #ff9500; }
        .calc-btn.gray:hover { background-color: #666666; }
        .calc-btn.dark-gray:hover { background-color: #444444; }
        .calc-btn.orange:hover { background-color: #ffaa33; }

        .control-center {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background-color: rgba(31, 41, 55, 0.7);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px); 
            border-top-left-radius: 2rem;
            border-top-right-radius: 2rem;
            box-shadow: inset 0 2px 10px rgba(255,255,255,0.1);
            transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            transform: translateY(100%);
            z-index: 20;
            display: flex;
            flex-direction: column;
            padding: 1rem;
        }
        .control-center.open {
            transform: translateY(0);
        }
        
        .cc-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 70px; 
            background-color: rgba(60, 60, 60, 0.7);
            border-radius: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.4);
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out;
            cursor: pointer;
        }
        .cc-btn:hover {
            transform: scale(1.05);
        }
        .cc-btn svg {
            margin-bottom: 0.25rem;
        }
        .cc-btn-text {
            font-size: 0.75rem;
            color: #ffffff;
            font-weight: 500;
        }
    </style>
</head>
<body class="bg-gray-900 flex flex-col items-center justify-center min-h-screen">

    <div id="os-container" class="os-container">

        <div class="absolute top-0 w-full z-20 flex items-center justify-between p-4 bg-transparent text-white font-semibold">
            <div class="flex items-center space-x-2 text-sm">
                <span id="current-time"></span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wifi"><path d="M5 12.55a7 7 0 0 1 14 0"/><path d="M8.5 16.55a3.5 3.5 0 0 1 7 0"/><line x1="2" x2="2" y1="20" y2="20"/><line x1="22" x2="22" y1="20" y2="20"/><line x1="12" x2="12" y1="20" y2="20"/></svg>
            </div>
            <div id="current-date" class="text-sm"></div>
            <div class="flex items-center space-x-2 text-sm">
                <span>99%</span>
                <div class="w-6 h-3 border border-white rounded-sm relative">
                    <div class="absolute top-[1px] left-[1px] w-[calc(100%-2px)] h-[calc(100%-2px)] bg-white rounded-[1px]"></div>
                </div>
            </div>
        </div>

        <div id="app-container" class="flex flex-col h-full pt-16 pb-12 w-full">
            <div id="home-screen" class="grid grid-cols-4 gap-6 p-6 overflow-y-auto w-full h-full">
                <button onclick="launchApp('calculator')" class="app-icon">
                    <div class="p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calculator"><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M8 6h8"/><path d="M8 10h8"/><line x1="12" x2="12" y1="18" y2="18"/><line x1="12" x2="12" y1="14" y2="14"/></svg>
                    </div>
                    <span class="text-xs font-medium">Calculator</span>
                </button>
                <button onclick="launchApp('notes')" class="app-icon">
                    <div class="p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook"><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M16 2v20"/><path d="M20 14H8"/></svg>
                    </div>
                    <span class="text-xs font-medium">Notes</span>
                </button>
                <button onclick="launchApp('camera')" class="app-icon">
                    <div class="p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-camera"><path d="M14.5 22h-5a2.5 2.5 0 0 1-2.5-2.5v-3.5a2.5 2.5 0 0 1 2.5-2.5h5a2.5 2.5 0 0 1 2.5 2.5v3.5a2.5 2.5 0 0 1-2.5 2.5z"/><path d="M12 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M17 22V10a2 2 0 0 0-2-2h-3.5"/><path d="M7 22V10a2 2 0 0 1 2-2h3.5"/><path d="M20 7.5V17a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7.5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z"/></svg>
                    </div>
                    <span class="text-xs font-medium">Camera</span>
                </button>
                <button onclick="launchApp('gallery')" class="app-icon">
                    <div class="p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gallery-horizontal"><rect x="2" y="3" width="20" height="18" rx="2" ry="2"/><path d="M2 12h20"/><circle cx="8.5" cy="8.5" r="1.5"/><circle cx="15.5" cy="8.5" r="1.5"/><path d="M16 12l2.5 2.5L22 10"/><path d="M7 12l2.5 2.5L12 10"/></svg>
                    </div>
                    <span class="text-xs font-medium">Gallery</span>
                </button>
                <button onclick="launchApp('tracker')" class="app-icon">
                    <div class="p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-phone-call"><path d="M22 16.92v3a2 2 0 0 1-2.18 2.06c-.15.06-.3.09-.45.09-1.5-.06-3.03-.31-4.52-.73a1.99 1.99 0 0 1-1.78-.81l-2.48-2.48a1.99 1.99 0 0 1-.81-1.78c-.42-1.49-.67-3.02-.73-4.52a2.001 2.001 0 0 1 2.06-2.18h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2z"/><path d="M14.5 6.5a8 8 0 0 0-8 8"/><path d="M18.5 2.5a12 12 0 0 0-12 12"/></svg>
                    </div>
                    <span class="text-xs font-medium">Tracker</span>
                </button>
                <button onclick="showMessageBox('Cloud app is a placeholder.')" class="app-icon">
                    <div class="p-3">
                        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cloud"><path d="M17.5 17.5a4.5 4.5 0 1 0-7.5-3.5L8.5 12a6 6 0 1 0-6 6h17.5z"/><path d="M22 17.5a4.5 4.5 0 1 0-7.5-3.5L14 12a6 6 0 1 0-6 6h17.5z"/></svg>
                    </div>
                    <span class="text-xs font-medium">Cloud</span>
                </button>
            </div>

            <div id="calculator-app" class="hidden flex flex-col h-full w-full p-4 justify-end">
                <div id="calculator-display" class="w-full flex justify-end items-end p-4 text-white text-6xl font-light overflow-hidden">0</div>
                <div class="grid grid-cols-4 gap-3 p-4">
                    <button onclick="handleCalculatorClick('C')" class="calc-btn gray">C</button>
                    <button onclick="handleCalculatorClick('+/-')" class="calc-btn gray">+/-</button>
                    <button onclick="handleCalculatorClick('%')" class="calc-btn gray">%</button>
                    <button onclick="handleCalculatorClick('÷')" class="calc-btn orange">÷</button>
                    
                    <button onclick="handleCalculatorClick('7')" class="calc-btn dark-gray">7</button>
                    <button onclick="handleCalculatorClick('8')" class="calc-btn dark-gray">8</button>
                    <button onclick="handleCalculatorClick('9')" class="calc-btn dark-gray">9</button>
                    <button onclick="handleCalculatorClick('x')" class="calc-btn orange">x</button>

                    <button onclick="handleCalculatorClick('4')" class="calc-btn dark-gray">4</button>
                    <button onclick="handleCalculatorClick('5')" class="calc-btn dark-gray">5</button>
                    <button onclick="handleCalculatorClick('6')" class="calc-btn dark-gray">6</button>
                    <button onclick="handleCalculatorClick('-')" class="calc-btn orange">-</button>

                    <button onclick="handleCalculatorClick('1')" class="calc-btn dark-gray">1</button>
                    <button onclick="handleCalculatorClick('2')" class="calc-btn dark-gray">2</button>
                    <button onclick="handleCalculatorClick('3')" class="calc-btn dark-gray">3</button>
                    <button onclick="handleCalculatorClick('+')" class="calc-btn orange">+</button>

                    <button onclick="handleCalculatorClick('0')" class="calc-btn dark-gray col-span-2 text-left pl-8">0</button>
                    <button onclick="handleCalculatorClick('.')" class="calc-btn dark-gray">.</button>
                    <button onclick="handleCalculatorClick('=')" class="calc-btn orange">=</button>
                </div>
            </div>

            <div id="notes-app" class="hidden flex flex-col h-full w-full p-4">
                <textarea id="notes-content" class="flex-1 w-full bg-gray-800 text-white p-4 rounded-xl shadow-inner resize-none focus:outline-none" placeholder="Start writing your notes here..."></textarea>
            </div>

            <div id="camera-app" class="hidden flex flex-col items-center justify-center h-full w-full">
                <video id="camera-stream" class="w-full h-full object-cover rounded-xl shadow-lg" autoplay playsinline></video>
                <canvas id="camera-canvas" class="hidden"></canvas>
                <button onclick="takePhoto()" class="absolute bottom-20 z-10 w-16 h-16 bg-white rounded-full flex items-center justify-center transition-transform hover:scale-110 shadow-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle text-gray-900"><circle cx="12" cy="12" r="10"/></svg>
                </button>
            </div>

            <div id="gallery-app" class="hidden flex-1 p-4 overflow-y-auto w-full">
                <div id="gallery-grid" class="grid grid-cols-2 gap-4">
                </div>
                <div id="gallery-empty" class="flex flex-col items-center justify-center h-full text-gray-500 hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gallery-horizontal mb-4"><rect x="2" y="3" width="20" height="18" rx="2" ry="2"/><path d="M2 12h20"/><circle cx="8.5" cy="8.5" r="1.5"/><circle cx="15.5" cy="8.5" r="1.5"/><path d="M16 12l2.5 2.5L22 10"/><path d="M7 12l2.5 2.5L12 10"/></svg>
                    <p>Your gallery is empty. Take some photos!</p>
                </div>
            </div>

            <div id="tracker-app" class="hidden flex flex-col items-center justify-center h-full w-full p-4 text-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-phone-call text-gray-400 mb-4"><path d="M22 16.92v3a2 2 0 0 1-2.18 2.06c-.15.06-.3.09-.45.09-1.5-.06-3.03-.31-4.52-.73a1.99 1.99 0 0 1-1.78-.81l-2.48-2.48a1.99 1.99 0 0 1-.81-1.78c-.42-1.49-.67-3.02-.73-4.52a2.001 2.001 0 0 1 2.06-2.18h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2z"/><path d="M14.5 6.5a8 8 0 0 0-8 8"/><path d="M18.5 2.5a12 12 0 0 0-12 12"/></svg>
                <h1 class="text-2xl font-bold mb-2 text-white">Phone Tracker</h1>
                <p class="text-lg text-gray-400 mb-6">This feature is a placeholder. In a real OS, it would use GPS to locate the device.</p>
                <div class="bg-gray-700 text-gray-300 p-4 rounded-xl shadow-inner w-full max-w-sm mb-4">
                    Last known location: Simulated Location
                </div>
                <button onclick="showMessageBox('Simulating pinging the device...')" class="bg-blue-600 hover:bg-blue-700 transition-colors text-white font-semibold py-3 px-6 rounded-full shadow-lg">
                    Ping Device
                </button>
            </div>
        </div>


        <div id="control-center" class="control-center">
            <div class="flex justify-center mb-4">
                <button onclick="toggleControlCenter(false)" class="p-2 text-white rounded-full transition-all hover:bg-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down"><path d="M6 9l6 6 6-6"/></svg>
                </button>
            </div>
            <div class="grid grid-cols-4 gap-4">

                <button onclick="showMessageBox('Wi-Fi toggle is a placeholder.')" class="cc-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wifi text-blue-500"><path d="M5 12.55a7 7 0 0 1 14 0"/><path d="M8.5 16.55a3.5 3.5 0 0 1 7 0"/><line x1="2" x2="2" y1="20" y2="20"/><line x1="22" x2="22" y1="20" y2="20"/><line x1="12" x2="12" y1="20" y2="20"/></svg>
                    <span class="cc-btn-text">Wi-Fi</span>
                </button>
                <button onclick="showMessageBox('Bluetooth toggle is a placeholder.')" class="cc-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bluetooth text-blue-500"><path d="m7 7 10 10-5 5V2l5 5-10 10"/></svg>
                    <span class="cc-btn-text">Bluetooth</span>
                </button>
                <button id="torch-btn" onclick="toggleTorch()" class="cc-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lightbulb text-gray-300"><path d="M15 14c.3-.3.6-.6.9-.9c.9-.9.9-2.2 0-3.1-1.2-1.2-3.2-1.2-4.4 0"/><path d="M12 22s2-2 3-3"/><path d="M12 22s-2-2-3-3"/><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/></svg>
                    <span class="cc-btn-text">Torch</span>
                </button>
                <button id="orientation-btn" onclick="toggleOrientation()" class="cc-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-compass text-gray-300"><path d="m16.24 7.76-1.41 1.41a6 6 0 1 1-6.55 6.55L7.76 16.24"/><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><circle cx="12" cy="12" r="1"/><path d="M15 15l-3-3-3 3-3-3-3-3"/></svg>
                    <span class="cc-btn-text">Orientation</span>
                </button>
                <button onclick="launchApp('calculator');" class="cc-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calculator text-gray-300"><rect width="16" height="20" x="4" y="2" rx="2"/><path d="M8 6h8"/><path d="M8 10h8"/><line x1="12" x2="12" y1="18" y2="18"/><line x1="12" x2="12" y1="14" y2="14"/></svg>
                    <span class="cc-btn-text">Calculator</span>
                </button>
                <button onclick="launchApp('camera');" class="cc-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-camera text-gray-300"><path d="M14.5 22h-5a2.5 2.5 0 0 1-2.5-2.5v-3.5a2.5 2.5 0 0 1 2.5-2.5h5a2.5 2.5 0 0 1 2.5 2.5v3.5a2.5 2.5 0 0 1-2.5 2.5z"/><path d="M12 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/><path d="M17 22V10a2 2 0 0 0-2-2h-3.5"/><path d="M7 22V10a2 2 0 0 1 2-2h3.5"/><path d="M20 7.5V17a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7.5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2z"/></svg>
                    <span class="cc-btn-text">Camera</span>
                </button>
            </div>
        </div>

        <div class="absolute bottom-0 w-full z-20 flex justify-center p-4">
            <button onclick="launchApp('home');" class="w-16 h-1 bg-white rounded-full transition-all hover:scale-110"></button>
            <button onclick="toggleControlCenter(true)" class="absolute -bottom-2 right-4 p-2 text-white transition-all hover:scale-110">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up text-gray-500 hover:text-white"><path d="M18 15l-6-6-6 6"/></svg>
            </button>
        </div>

    </div>

    <script>
        const homeScreen = document.getElementById('home-screen');
        const calculatorApp = document.getElementById('calculator-app');
        const notesApp = document.getElementById('notes-app');
        const cameraApp = document.getElementById('camera-app');
        const galleryApp = document.getElementById('gallery-app');
        const trackerApp = document.getElementById('tracker-app');
        const controlCenter = document.getElementById('control-center');
        const calculatorDisplay = document.getElementById('calculator-display');
        const cameraVideo = document.getElementById('camera-stream');
        const cameraCanvas = document.getElementById('camera-canvas');
        const galleryGrid = document.getElementById('gallery-grid');
        const galleryEmpty = document.getElementById('gallery-empty');
        const torchBtn = document.getElementById('torch-btn');
        const orientationBtn = document.getElementById('orientation-btn');

        let calculatorInput = '0';
        let cameraStream = null;
        let galleryImages = [];

        function showMessageBox(message) {
            const osContainer = document.getElementById('os-container');
            const messageBoxHtml = `
                <div class="absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 backdrop-blur-md">
                    <div class="bg-gray-800 p-6 rounded-xl shadow-xl text-white text-center">
                        <p class="mb-4">${message}</p>
                        <button onclick="this.parentNode.parentNode.remove()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-full">OK</button>
                    </div>
                </div>
            `;
            osContainer.insertAdjacentHTML('beforeend', messageBoxHtml);
        }

        function launchApp(appName) {
            const apps = [homeScreen, calculatorApp, notesApp, cameraApp, galleryApp, trackerApp];
            apps.forEach(app => app.classList.add('hidden'));

            switch (appName) {
                case 'home':
                    homeScreen.classList.remove('hidden');
                    stopCamera();
                    break;
                case 'calculator':
                    calculatorApp.classList.remove('hidden');
                    stopCamera();
                    break;
                case 'notes':
                    notesApp.classList.remove('hidden');
                    stopCamera();
                    break;
                case 'camera':
                    cameraApp.classList.remove('hidden');
                    startCamera();
                    break;
                case 'gallery':
                    galleryApp.classList.remove('hidden');
                    stopCamera();
                    renderGallery();
                    break;
                case 'tracker':
                    trackerApp.classList.remove('hidden');
                    stopCamera();
                    break;
            }
            toggleControlCenter(false); 
        }

        function toggleControlCenter(forceOpen) {
            if (forceOpen === true) {
                controlCenter.classList.add('open');
            } else if (forceOpen === false) {
                controlCenter.classList.remove('open');
            } else {
                controlCenter.classList.toggle('open');
            }
        }

        function updateTimeAndDate() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
            document.getElementById('current-time').textContent = timeString;
            document.getElementById('current-date').textContent = dateString;
        }
        setInterval(updateTimeAndDate, 1000);
        window.onload = updateTimeAndDate; 

        function handleCalculatorClick(value) {
            if (calculatorInput === '0' && value !== '.') {
                calculatorInput = value;
            } else if (['+', '-', 'x', '÷'].includes(value)) {
                calculatorInput += ' ' + value + ' ';
            } else if (value === '=') {
                try {
                    const result = eval(calculatorInput.replace(/x/g, '*').replace(/÷/g, '/'));
                    calculatorInput = result.toString();
                } catch (e) {
                    calculatorInput = 'Error';
                }
            } else if (value === 'C') {
                calculatorInput = '0';
            } else if (value === '+/-') {
                calculatorInput = (parseFloat(calculatorInput) * -1).toString();
            } else if (value === '%') {
                calculatorInput = (parseFloat(calculatorInput) / 100).toString();
            } else {
                calculatorInput += value;
            }
            calculatorDisplay.textContent = calculatorInput;
        }

        async function startCamera() {
            if (cameraStream) return;
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
                cameraStream = stream;
                if (cameraVideo) {
                    cameraVideo.srcObject = stream;
                }
            } catch (err) {
                console.error("Error accessing the camera: ", err);
                showMessageBox('Could not access the camera. Please check permissions.');
            }
        }

        function stopCamera() {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
        }

        function takePhoto() {
            if (cameraVideo && cameraCanvas) {
                const video = cameraVideo;
                const canvas = cameraCanvas;
                const context = canvas.getContext('2d');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                context.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
                const imageDataUrl = canvas.toDataURL('image/png');
                galleryImages.unshift(imageDataUrl);
                showMessageBox('Photo saved to Gallery!');
            }
        }

        function renderGallery() {
            galleryGrid.innerHTML = '';
            if (galleryImages.length === 0) {
                galleryEmpty.classList.remove('hidden');
            } else {
                galleryEmpty.classList.add('hidden');
                galleryImages.forEach(image => {
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'w-full h-36 bg-gray-700 rounded-xl overflow-hidden shadow-lg';
                    const img = document.createElement('img');
                    img.src = image;
                    img.className = 'w-full h-full object-cover';
                    imgContainer.appendChild(img);
                    galleryGrid.appendChild(imgContainer);
                });
            }
        }

        function toggleTorch() {
            const isTorchOn = torchBtn.classList.toggle('bg-yellow-500');
            torchBtn.classList.toggle('bg-gray-700', !isTorchOn);
            const icon = torchBtn.querySelector('svg');
            const text = torchBtn.querySelector('span');
            icon.classList.toggle('text-gray-900', isTorchOn);
            icon.classList.toggle('text-gray-300', !isTorchOn);
            text.classList.toggle('text-gray-900', isTorchOn);
            text.classList.toggle('text-white', !isTorchOn);
        }

        function toggleOrientation() {
            const isLocked = orientationBtn.classList.toggle('bg-red-500');
            orientationBtn.classList.toggle('bg-gray-700', !isLocked);
            const icon = orientationBtn.querySelector('svg');
            const text = orientationBtn.querySelector('span');
            icon.classList.toggle('text-gray-900', isLocked);
            icon.classList.toggle('text-gray-300', !isLocked);
            text.classList.toggle('text-gray-900', isLocked);
            text.classList.toggle('text-white', !isLocked);
        }
    </script>
</body>
</html>
